# Финансовое приложение ВШЭ-Банк

## Общая идея
Приложение для учёта финансов, позволяющее пользователям управлять счетами, категориями и операциями (доходами/расходами). Пользователь может анализировать свои финансы, экспортировать и импортировать данные.

Реализованная функциональность:
- Работа с доменной моделью: создание, редактирование и удаление счетов, категорий, операций
- Аналитика: подсчет разницы доходов/расходов за период, группировка по категориям
- Импорт/экспорт данных в разных форматах (CSV, JSON, YAML)
- Измерение времени работы пользовательских сценариев

## Архитектура
- Directory **/Domain** содержит доменные классы (BankAccount, Category, Operation)
- Directory **/Services** содержит сервисный слой:
  - **/Facade** - фасады для работы с доменными объектами
  - **/Command** - реализация паттерна Команда и Декоратор
  - **/Export** - экспорт данных (Visitor)
  - **/Import** - импорт данных (Template Method)
  - **/Proxy** - кэширование объектов
  - **/Implementations** - фабрика объектов
- **Program.cs** - консольный интерфейс приложения

## Принципы SOLID и GRASP

### Single Responsibility Principle (SRP)
- Каждый класс доменной модели (BankAccount, Category, Operation) отвечает только за свои данные и поведение
- Фасады разделены по областям ответственности (BankAccountFacade, CategoryFacade, OperationFacade, AnalyticsFacade)
- Классы экспорта/импорта отвечают только за свой формат

### Open/Closed Principle (OCP)
- Система легко расширяется новыми типами операций без изменения существующего кода
- Добавление новых форматов экспорта/импорта не требует изменения существующих классов

### Liskov Substitution Principle (LSP)
- Все реализации ImportTemplate корректно используются через базовый класс
- Все реализации ICommand могут использоваться взаимозаменяемо

### Interface Segregation Principle (ISP)
- Интерфейс IVisitor содержит только необходимые методы
- Интерфейс ICommand имеет минимальный набор методов

### Dependency Inversion Principle (DIP)
- Фасады зависят от абстракций, а не от конкретных реализаций
- Используется DI-контейнер для управления зависимостями

### High Cohesion (GRASP)
- Классы имеют высокую связность - отвечают за четко определенную задачу
- AnalyticsFacade группирует всю аналитическую функциональность

### Low Coupling (GRASP)
- Минимальные зависимости между компонентами
- Компоненты взаимодействуют через интерфейсы и абстракции

## Паттерны GoF

### Порождающие паттерны
- **Factory (Фабрика)** - класс `FinancialObjectFactory` централизованно создает доменные объекты, обеспечивает валидацию и последовательную нумерацию id.

### Структурные паттерны
- **Facade (Фасад)** - классы `BankAccountFacade`, `CategoryFacade`, `OperationFacade`, `AnalyticsFacade` упрощают доступ к функциональности системы.
- **Proxy (Прокси)** - класс `BankAccountProxy` обеспечивает кэширование объектов в памяти.

### Поведенческие паттерны
- **Command (Команда)** - интерфейс `ICommand` и его реализации (`UpdateBalanceCommand`, `CreateOperationCommand`, `DeleteOperationCommand`) позволяют инкапсулировать пользовательские сценарии.
- **Decorator (Декоратор)** - класс `TimeMeasureDecorator` добавляет функциональность измерения времени к командам.
- **Template Method (Шаблонный метод)** - `ImportTemplate` определяет скелет алгоритма импорта, делегируя специфичные шаги подклассам.
- **Visitor (Посетитель)** - `IVisitor` и его реализации (`CsvExportVisitor`, `JsonExportVisitor`) позволяют добавлять новые операции для объектов доменной модели без их изменения.

## Инструкция по запуску

### Предварительные требования
- .NET SDK 9.0 или выше
- Любая среда разработки с поддержкой C# (Visual Studio, VS Code, Rider)

### Запуск приложения
1. Клонируйте репозиторий
2. Откройте терминал и перейдите в корневую директорию проекта:
3. Соберите проект:
   ```
   dotnet build FinanceApp.sln
   ```
4. Запустите приложение:
   ```
   cd FinanceApp
   dotnet run
   ```
5. Или используйте скрипты автоматического запуска:
   - На Windows: запустите `run.bat`
   - На macOS/Linux: запустите `chmod +x run.sh && ./run.sh`

### Запуск тестов
1. Перейдите в корневую директорию проекта:
2. Запустите тесты:
   ```
   dotnet test
   ```
3. Для анализа покрытия используйте:
   ```
   dotnet test /p:CollectCoverage=true /p:CoverletOutputFormat=lcov
   ```

### Функциональность приложения
В меню приложения доступны следующие опции:
1. Просмотр счетов
2. Создать новый счет
3. Просмотр категорий
4. Создать новую категорию
5. Просмотр операций
6. Создать новую операцию
7. Аналитика
8. Экспорт данных
9. Импорт данных (пример)
10. Удалить счет
11. Удалить категорию
12. Удалить операцию
0. Выход
